\usepackage[width=150mm,top=35mm,bottom=25mm,bindingoffset=6mm]{geometry}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{microtype}

%\setlength\parindent{0pt}
\usepackage{parskip}

% ****************************************************************************************************
% 2. Personal data and user ad-hoc commands (insert your own data here)
% ****************************************************************************************************
\newcommand{\myTitle}{State Space Models for Epidemiological Surveillance of COVID-19}
\newcommand{\mySubtitle}{Computational Methods and Applications to German data}
\newcommand{\myDegree}{M. Sc}
\newcommand{\myName}{Stefan Heyder\xspace}
\newcommand{\myProf}{Prof. Dr. rer. nat. Thomas Hotz\xspace}
\newcommand{\myOtherProf}{Put name here\xspace}
\newcommand{\mySupervisor}{Put name here\xspace}
\newcommand{\myFaculty}{Put data here\xspace}
\newcommand{\myDepartment}{FG Wahrscheinlichkeitsrechnung und mathematische Statistik\xspace}
\newcommand{\myUni}{Technische Universität Ilmenau\xspace}
\newcommand{\myLocation}{Ilmenau\xspace}
\usepackage{datetime2}
\newcommand{\myTime}{\DTMnow}
\newcommand{\myVersion}{Draft v 0.9}

% ****************************************************************************************************
% 3. Loading some handy packages
% ****************************************************************************************************
% ********************************************************************
% Packages with options that might require adjustments
% ********************************************************************
\usepackage[ngerman,american]{babel}

\usepackage{csquotes}
%\PassOptionsToPackage{%
%  backend=biber,bibencoding=utf8, %instead of bibtex
%  %backend=bibtex8,bibencoding=ascii,%
%  language=auto,%
%  style=numeric-comp,%
%  %style=authoryear-comp, % Author 1999, 2010
%  %bibstyle=authoryear,dashed=false, % dashed: substitute rep. author with ---
%  sorting=nyt, % name, year, title
%  maxbibnames=10, % default: 3, et al.
%  %backref=true,%
%  natbib=true % natbib compatibility mode (\citep and \citet still work)
%}{biblatex}
\usepackage[
  backend=biber,
  bibencoding=utf8,
  language=auto,
  style=authoryear-comp,
  date=year,
  sorting=nyt,
  maxbibnames=2,
  maxcitenames=2,
  natbib=true,
  giveninits=true,
  uniquelist=false,
  uniquename=init
]{biblatex}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{amssymb}

% color box for writing
\usepackage{tcolorbox}
% tcolorbox and externalize combination is problematic
% https://tex.stackexchange.com/questions/486102/problems-with-tcolorbox-and-tikz-external
\tcbsetforeverylayer{shield externalize}

\usepackage{xspace}

\usepackage{enumitem}
\setlist[enumerate,1]{label=(\roman*),ref=(\roman*)}


% ********************************************************************
% General useful packages
% ********************************************************************
\usepackage{graphicx} %
\usepackage[printonlyused,smaller]{acronym} % nice macros for handling all acronyms in the thesis

% ********************************************************************
% TIKZ
% ********************************************************************
% sometimes tikzdevice creates additional figures it includes in this directory
% wierdly, \pgfimage does not seem to respect graphicspath
\let\pgfimage\includegraphics
% using ./tikz/ here does not work with mactex
\graphicspath{{tikz/}}
\usepackage{tikz}
\usepackage{tikzscale}
\usetikzlibrary{calc}
\usetikzlibrary{external}

\usepackage{pgfplots}
\DeclareUnicodeCharacter{2212}{−}
\usepgfplotslibrary{groupplots,dateplot}
\usetikzlibrary{patterns,shapes.arrows}
\pgfplotsset{compat=newest}
\usetikzlibrary{external}
%\tikzexternalize[mode=list and make, prefix=figures-tikz/]
\tikzexternalize[prefix=tikz/externalized/]


% ****************************************************************************************************
% 4. Setup floats: tables, (sub)figures, and captions
% ****************************************************************************************************
%\usepackage{tabularx} % better tables
\usepackage{booktabs} % better tables
\usepackage{array} % for table with multicols
%\usepackage{subfig}
\usepackage{caption}
\usepackage{subcaption}
% Colors
\usepackage{xcolor}

% TU Ilmenau color scheme definitions
\definecolor{TUIl-orange}{RGB}{255, 121, 0}
\definecolor{TUIl-blue}{RGB}{0, 51, 89}
\definecolor{TUIl-green}{RGB}{0, 116, 122}
\definecolor{TUIl-grey}{RGB}{165, 165, 165}


% ********************************************************************
% Setup autoreferences (hyperref and babel)
% ********************************************************************
% There are some issues regarding autorefnames
% http://www.tex.ac.uk/cgi-bin/texfaq2html?label=latexwords
% you have to redefine the macros for the
% language you use, e.g., american, ngerman
% (as chosen when loading babel/AtBeginDocument)
% ********************************************************************
\makeatletter
\@ifpackageloaded{babel}%
  {%
    \addto\extrasamerican{%
      \renewcommand*{\figureautorefname}{Figure}%
      \renewcommand*{\tableautorefname}{Table}%
      \renewcommand*{\partautorefname}{Part}%
      \renewcommand*{\chapterautorefname}{Chapter}%
      \renewcommand*{\sectionautorefname}{Section}%
      \renewcommand*{\subsectionautorefname}{Section}%
      \renewcommand*{\subsubsectionautorefname}{Section}%
    }%
    \addto\extrasngerman{%
      \renewcommand*{\paragraphautorefname}{Absatz}%
      \renewcommand*{\subparagraphautorefname}{Unterabsatz}%
      \renewcommand*{\footnoteautorefname}{Fu\"snote}%
      \renewcommand*{\FancyVerbLineautorefname}{Zeile}%
      \renewcommand*{\theoremautorefname}{Theorem}%
      \renewcommand*{\appendixautorefname}{Anhang}%
      \renewcommand*{\equationautorefname}{Gleichung}%
      \renewcommand*{\itemautorefname}{Punkt}%
    }%
      % Fix to getting autorefs for subfigures right (thanks to Belinda Vogt for changing the definition)
      \providecommand{\subfigureautorefname}{\figureautorefname}%
    }{\relax}
\makeatother
% ********************************************************************
% Fine-tune hyperreferences (hyperref should be called last)
% ********************************************************************

\usepackage{hyperref}
\hypersetup{%
  %draft, % hyperref's draft mode, for printing see below
  colorlinks=true, linktocpage=true, pdfstartpage=3, pdfstartview=FitV,%
  % uncomment the following line if you want to have black links (e.g., for printing)
  %colorlinks=false, linktocpage=false, pdfstartpage=3, pdfstartview=FitV, pdfborder={0 0 0},%
  breaklinks=true, pageanchor=true,%
  pdfpagemode=UseNone, %
  % pdfpagemode=UseOutlines,%
  plainpages=false, bookmarksnumbered, bookmarksopen=true, bookmarksopenlevel=1,%
  hypertexnames=true, pdfhighlight=/O,%nesting=true,%frenchlinks,%
  %urlcolor=CTurl, linkcolor=CTlink, 
  citecolor=gray, %pagecolor=RoyalBlue,%
  %urlcolor=Black, linkcolor=Black, citecolor=Black, %pagecolor=Black,%
  pdftitle={\myTitle},%
  pdfauthor={\textcopyright\ \myName, \myUni, \myFaculty},%
  pdfsubject={},%
  pdfkeywords={},%
  pdfcreator={pdfLaTeX}%
}



% glossaries and acronyms
\usepackage[toc,acronym,symbols]{glossaries}
%\usepackage[toc,acronym,symbols,nogroupskip]{glossaries-extra}
\glsdisablehyper
% algorithms
\usepackage{algorithm}
\usepackage{algpseudocode}

% todos
\usepackage[colorinlistoftodos,prependcaption,textsize=tiny]{todonotes}
\presetkeys%
    {todonotes}%
    {inline,backgroundcolor=orange}{}
\makeatletter
\renewcommand{\todo}[2][]{\tikzexternaldisable\@todo[#1]{#2}\tikzexternalenable}
\newcommand{\todoTH}[2][]{\tikzexternaldisable\@todo[backgroundcolor=red,#1]{#2}\tikzexternalenable}
\makeatother

% cleveref should be loaded last
\usepackage{thmtools}
\usepackage{cleveref}
\usepackage{etoolbox}

\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}

%\theoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{notation}[theorem]{Notation}

% Configure cleveref with BOTH singular and plural forms
\crefname{theorem}{theorem}{theorems}
\crefname{proposition}{proposition}{propositions}
\crefname{lemma}{lemma}{lemmas}
\crefname{corollary}{corollary}{corollaries}
\crefname{definition}{definition}{definitions}
\crefname{example}{example}{examples}
\crefname{remark}{remark}{remarks}
\crefname{notation}{notation}{notations}

% Add capitalized versions for sentence beginnings
\Crefname{theorem}{Theorem}{Theorems}
\Crefname{definition}{Definition}{Definitions}
\Crefname{example}{Example}{Examples}
% etc. for other environments

\AtBeginEnvironment{remark}{\pushQED{\qed}}
\AtEndEnvironment{remark}{\popQED\renewcommand{\qedsymbol}{\(\blacksquare\)}}
